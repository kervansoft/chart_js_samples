<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="utf-8">
  <title>Saha & H√ºcre Realtime Harita</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body { height: 100%; }
    #map { height: 100vh; width: 100vw; }
    
    .controls-panel {
      position: absolute; z-index: 1000; right: 10px; top: 10px;
      background: rgba(255,255,255,0.97); border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15); font-family: "Segoe UI", Roboto, Arial;
      min-width: 280px; overflow: hidden;
    }

    .panel-header {
      background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);
      color: white; padding: 12px 15px; font-weight: 600; font-size: 13px;
    }

    .search-box {
      padding: 12px 15px; border-bottom: 1px solid #e0e0e0;
    }

    .search-box input {
      width: 100%; padding: 10px 12px; border: 1px solid #ddd; border-radius: 6px;
      font-size: 12px; font-family: inherit;
    }

    .search-box input:focus {
      outline: none; border-color: #2196F3; box-shadow: 0 0 6px rgba(33, 150, 243, 0.3);
    }

    .checkbox-group {
      padding: 12px 15px; border-bottom: 1px solid #e0e0e0;
    }

    .checkbox-group label {
      display: flex; align-items: center; margin-bottom: 8px; cursor: pointer;
      font-size: 12px; color: #333;
    }

    .checkbox-group label:last-child { margin-bottom: 0; }

    .checkbox-group input[type="checkbox"] {
      margin-right: 8px; cursor: pointer; accent-color: #2196F3;
    }

    .toggle-legend {
      padding: 12px 15px; display: flex; gap: 12px; font-size: 11px;
    }

    .legend-item {
      display: flex; align-items: center; gap: 6px;
    }

    .legend-dot { width: 8px; height: 8px; border-radius: 50%; }
    .dot-active { background: #4caf50; }
    .dot-inactive { background: #f44336; }

    /* Katman Se√ßici */
    .layer-control {
      position: absolute; z-index: 1000; left: 10px; top: 10px;
      background: rgba(255,255,255,0.97); border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15); font-family: "Segoe UI", Roboto, Arial;
      min-width: 200px; overflow: hidden;
    }

    .layer-control-header {
      background: linear-gradient(135deg, #4CAF50 0%, #388E3C 100%);
      color: white; padding: 12px 15px; font-weight: 600; font-size: 13px;
    }

    .layer-control-body {
      padding: 12px 15px;
    }

    .layer-control-body label {
      display: flex; align-items: center; margin-bottom: 8px; cursor: pointer;
      font-size: 12px; color: #333;
    }

    .layer-control-body label:last-child { margin-bottom: 0; }

    .layer-control-body input[type="radio"] {
      margin-right: 8px; cursor: pointer; accent-color: #4CAF50;
    }

    /* Arama Sonu√ßlarƒ± Tablosu */
    #searchResults {
      display: none; position: absolute; bottom: 10px; right: 10px; z-index: 1001;
      background: rgba(255,255,255,0.98); border-radius: 8px; 
      box-shadow: 0 6px 20px rgba(0,0,0,0.2); max-height: 400px; width: 450px;
      overflow: hidden; font-family: "Segoe UI", Roboto, Arial;
    }

    #searchResults.show { display: flex; flex-direction: column; }

    .results-header {
      background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);
      color: white; padding: 12px 15px; font-weight: 600; font-size: 13px;
      display: flex; justify-content: space-between; align-items: center;
    }

    .close-btn {
      cursor: pointer; font-size: 18px; color: white; opacity: 0.8; transition: opacity 0.2s;
    }

    .close-btn:hover { opacity: 1; }

    .results-table-container {
      overflow-y: auto; flex: 1;
    }

    .results-table {
      width: 100%; border-collapse: collapse; font-size: 12px;
    }

    .results-table tr {
      border-bottom: 1px solid #e8e8e8; transition: background 0.2s;
    }

    .results-table tr:hover {
      background-color: #f5f5f5;
    }

    .results-table td {
      padding: 10px 12px; text-align: left;
    }

    .results-table td:first-child {
      font-weight: 600; color: #2196F3; width: 40%;
    }

    .results-table td:last-child {
      color: #666; width: 60%;
    }

    .results-table tr.clickable {
      cursor: pointer;
    }

    .results-table tr.clickable:hover td:first-child {
      text-decoration: underline;
    }

    .no-results {
      padding: 20px; text-align: center; color: #999; font-size: 12px;
    }

    /* Detay Panel */
    #detailPanel {
      display: none; position: absolute; bottom: 10px; right: 10px; z-index: 1001;
      background: rgba(255,255,255,0.98); border-radius: 8px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.2); width: 420px;
      font-family: "Segoe UI", Roboto, Arial; overflow: hidden;
    }

    #detailPanel.show { display: block; }

    .detail-header {
      background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);
      color: white; padding: 12px 15px; font-weight: 600; font-size: 13px;
      display: flex; justify-content: space-between; align-items: center;
    }

    .detail-body {
      padding: 15px; max-height: 350px; overflow-y: auto;
    }

    .detail-table {
      width: 100%; font-size: 11px;
    }

    .detail-table tr {
      border-bottom: 1px solid #f0f0f0;
    }

    .detail-table td {
      padding: 8px 0; vertical-align: top;
    }

    .detail-table td:first-child {
      font-weight: 600; color: #2196F3; width: 35%;
    }

    .detail-table td:last-child {
      color: #333; word-break: break-word;
    }

    .prb-high { color: #f44336; font-weight: bold; }
    .prb-medium { color: #ff9800; font-weight: bold; }
    .prb-low { color: #4caf50; font-weight: bold; }
  </style>
</head>
<body>
  <div id="map"></div>
  
  <!-- Katman Se√ßici -->
  <div class="layer-control">
    <div class="layer-control-header">üó∫Ô∏è Harita Katmanlarƒ±</div>
    <div class="layer-control-body">
      <label>
        <input type="radio" name="mapLayer" value="osm" checked>
        OpenStreetMap
      </label>
      <label>
        <input type="radio" name="mapLayer" value="esri">
        Uydu G√∂r√ºnt√ºs√º (ESRI)
      </label>
    </div>
  </div>
  
  <!-- Kontrol Paneli -->
  <div class="controls-panel">
    <div class="panel-header">‚öôÔ∏è Kontrol Paneli</div>
    
    <div class="search-box">
      <input type="text" id="searchInput" placeholder="H√ºcre/Saha adƒ± ara...">
    </div>

    <div class="checkbox-group">
      <label>
        <input type="checkbox" id="heatToggleInput" checked>
        Isƒ±l Harita (PRB'ye g√∂re)
      </label>
      <label>
        <input type="checkbox" id="fixedNEsToggle" checked>
        Aktif Sahalar (Fixed NE's)
      </label>
      <label>
        <input type="checkbox" id="disconnectedNEsToggle" checked>
        ƒ∞naktif Sahalar (Disconnected NE's)
      </label>
    </div>

    <div class="toggle-legend">
      <div class="legend-item">
        <div class="legend-dot dot-active"></div>
        <span>Aktif</span>
      </div>
      <div class="legend-item">
        <div class="legend-dot dot-inactive"></div>
        <span>ƒ∞naktif</span>
      </div>
    </div>
  </div>

  <!-- Arama Sonu√ßlarƒ± -->
  <div id="searchResults">
    <div class="results-header">
      üìä Arama Sonu√ßlarƒ±
      <span class="close-btn" onclick="closeSearchResults()">√ó</span>
    </div>
    <div class="results-table-container">
      <table class="results-table" id="resultsTable">
      </table>
    </div>
  </div>

  <!-- Detay Panel -->
  <div id="detailPanel">
    <div class="detail-header">
      üìç H√ºcre Detaylarƒ±
      <span class="close-btn" onclick="closeDetailPanel()">√ó</span>
    </div>
    <div class="detail-body">
      <table class="detail-table" id="detailTable">
      </table>
    </div>
  </div>

  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
  <script src="https://unpkg.com/leaflet.heat/dist/leaflet-heat.js"></script>

  <script>
    // Veriler
    const earthquakesRaw = [
      {id:1079,eventId:523046,eventDate:"2025-04-23 12:49:10",magnitude:3.20,longitude:28.2444,latitude:40.86,location:"MARMARA DENIZI - SILIVRI",depth:6.92},
      {id:1080,eventId:523051,eventDate:"2025-04-23 12:51:19",magnitude:5.90,longitude:28.3267,latitude:40.8369,location:"MARMARA DENIZI - BUYUKCEKMECE",depth:6.99},
      {id:1081,eventId:526075,eventDate:"2025-05-13 22:51:16",magnitude:4.50,longitude:27.0817,latitude:35.3289,location:"AKDENIZ - DATCA",depth:20.41},
      {id:1083,eventId:526861,eventDate:"2025-05-22 03:19:36",magnitude:7.60,longitude:25.9536,latitude:35.8053,location:"EGE DENIZI",depth:17.7},
      {id:1105,eventId:552293,eventDate:"2025-10-27 22:48:29",magnitude:6.10,longitude:28.2308,latitude:39.1839,location:"SINDIRGI (BALIKESIR)",depth:5.99}
    ];

    const siteStatuses = [
      // ƒ∞stanbul kara sƒ±nƒ±rlarƒ± i√ßinde 300 adet saha durumu
      {cab_name:"GL34_IST_001",enabled_date:"2023-10-19 05:00:00",Lat_Site:41.0156,Lon_Site:28.9789},
      {cab_name:"GL34_IST_002",enabled_date:null,Lat_Site:41.0089,Lon_Site:28.9756},
      {cab_name:"GL34_IST_003",enabled_date:"2023-09-28 20:00:00",Lat_Site:41.0234,Lon_Site:28.9823},
      {cab_name:"GL34_IST_004",enabled_date:"2023-11-01 10:15:30",Lat_Site:41.0145,Lon_Site:28.9812},
      {cab_name:"GL34_IST_005",enabled_date:null,Lat_Site:41.0198,Lon_Site:28.9678},
      {cab_name:"GL34_IST_006",enabled_date:"2023-10-19 02:00:41",Lat_Site:40.9876,Lon_Site:29.3456},
      {cab_name:"GL34_IST_007",enabled_date:"2023-10-19 02:10:41",Lat_Site:40.9934,Lon_Site:29.3512},
      {cab_name:"GL34_IST_008",enabled_date:null,Lat_Site:40.9823,Lon_Site:29.3389},
      {cab_name:"GL34_IST_009",enabled_date:"2023-10-19 02:30:41",Lat_Site:40.9945,Lon_Site:29.3234},
      {cab_name:"GL34_IST_010",enabled_date:"2023-10-19 02:40:41",Lat_Site:40.9789,Lon_Site:29.3645},
      {cab_name:"GL34_IST_011",enabled_date:"2023-09-28 18:00:59",Lat_Site:41.0789,Lon_Site:28.6543},
      {cab_name:"GL34_IST_012",enabled_date:null,Lat_Site:41.0834,Lon_Site:28.6588},
      {cab_name:"GL34_IST_013",enabled_date:"2023-09-28 18:10:59",Lat_Site:41.0745,Lon_Site:28.6498},
      {cab_name:"GL34_IST_014",enabled_date:"2023-09-28 18:15:59",Lat_Site:41.0879,Lon_Site:28.6543},
      {cab_name:"GL34_IST_015",enabled_date:null,Lat_Site:41.0699,Lon_Site:28.6353},
      {cab_name:"GL34_IST_016",enabled_date:"2023-09-28 13:00:45",Lat_Site:40.9456,Lon_Site:29.1234},
      {cab_name:"GL34_IST_017",enabled_date:"2023-09-28 13:05:45",Lat_Site:40.9501,Lon_Site:29.1234},
      {cab_name:"GL34_IST_018",enabled_date:null,Lat_Site:40.9456,Lon_Site:29.1279},
      {cab_name:"GL34_IST_019",enabled_date:"2023-09-28 13:15:45",Lat_Site:40.9411,Lon_Site:29.1234},
      {cab_name:"GL34_IST_020",enabled_date:"2023-09-28 13:20:45",Lat_Site:40.9456,Lon_Site:29.1189},
      {cab_name:"GL34_IST_021",enabled_date:null,Lat_Site:41.0565,Lon_Site:29.0145},
      {cab_name:"GL34_IST_022",enabled_date:"2023-11-01 10:20:30",Lat_Site:41.0612,Lon_Site:29.0234},
      {cab_name:"GL34_IST_023",enabled_date:"2023-11-01 10:25:30",Lat_Site:41.0467,Lon_Site:29.0089},
      {cab_name:"GL34_IST_024",enabled_date:null,Lat_Site:41.0678,Lon_Site:29.0301},
      {cab_name:"GL34_IST_025",enabled_date:"2023-11-01 10:35:30",Lat_Site:41.0523,Lon_Site:29.0056},
      {cab_name:"GL34_IST_026",enabled_date:"2023-11-02 14:45:20",Lat_Site:40.8956,Lon_Site:29.2345},
      {cab_name:"GL34_IST_027",enabled_date:null,Lat_Site:40.9023,Lon_Site:29.2412},
      {cab_name:"GL34_IST_028",enabled_date:"2023-11-02 14:55:20",Lat_Site:40.8889,Lon_Site:29.2278},
      {cab_name:"GL34_IST_029",enabled_date:"2023-11-02 15:00:20",Lat_Site:40.9089,Lon_Site:29.2534},
      {cab_name:"GL34_IST_030",enabled_date:null,Lat_Site:40.8756,Lon_Site:29.2145},
      {cab_name:"GL34_IST_031",enabled_date:"2023-11-03 09:30:15",Lat_Site:41.1234,Lon_Site:28.8567},
      {cab_name:"GL34_IST_032",enabled_date:"2023-11-03 09:35:15",Lat_Site:41.1301,Lon_Site:28.8623},
      {cab_name:"GL34_IST_033",enabled_date:null,Lat_Site:41.1167,Lon_Site:28.8489},
      {cab_name:"GL34_IST_034",enabled_date:"2023-11-03 09:45:15",Lat_Site:41.1378,Lon_Site:28.8734},
      {cab_name:"GL34_IST_035",enabled_date:"2023-11-03 09:50:15",Lat_Site:41.1089,Lon_Site:28.8412},
      {cab_name:"GL34_IST_036",enabled_date:null,Lat_Site:40.7845,Lon_Site:29.4567},
      {cab_name:"GL34_IST_037",enabled_date:"2023-11-04 16:25:45",Lat_Site:40.7912,Lon_Site:29.4623},
      {cab_name:"GL34_IST_038",enabled_date:"2023-11-04 16:30:45",Lat_Site:40.7778,Lon_Site:29.4434},
      {cab_name:"GL34_IST_039",enabled_date:null,Lat_Site:40.8001,Lon_Site:29.4712},
      {cab_name:"GL34_IST_040",enabled_date:"2023-11-04 16:40:45",Lat_Site:40.7667,Lon_Site:29.4301},
      {cab_name:"GL34_IST_041",enabled_date:"2023-11-05 11:10:30",Lat_Site:41.2456,Lon_Site:28.9234},
      {cab_name:"GL34_IST_042",enabled_date:null,Lat_Site:41.2523,Lon_Site:28.9301},
      {cab_name:"GL34_IST_043",enabled_date:"2023-11-05 11:20:30",Lat_Site:41.2389,Lon_Site:28.9089},
      {cab_name:"GL34_IST_044",enabled_date:"2023-11-05 11:25:30",Lat_Site:41.2578,Lon_Site:28.9456},
      {cab_name:"GL34_IST_045",enabled_date:null,Lat_Site:41.2301,Lon_Site:28.9012},
      {cab_name:"GL34_IST_046",enabled_date:"2023-11-06 13:45:50",Lat_Site:40.9234,Lon_Site:29.0156},
      {cab_name:"GL34_IST_047",enabled_date:"2023-11-06 13:50:50",Lat_Site:40.9301,Lon_Site:29.0223},
      {cab_name:"GL34_IST_048",enabled_date:null,Lat_Site:40.9167,Lon_Site:28.9989},
      {cab_name:"GL34_IST_049",enabled_date:"2023-11-06 14:00:50",Lat_Site:40.9389,Lon_Site:29.0367},
      {cab_name:"GL34_IST_050",enabled_date:"2023-11-06 14:05:50",Lat_Site:40.9056,Lon_Site:29.0034},
      ...Array.from({length:250}, (_, i) => ({
        cab_name: `GL34_IST_${String(i+51).padStart(3,'0')}`,
        enabled_date: Math.random() > 0.3 ? `2023-${String(Math.floor(Math.random()*12)+1).padStart(2,'0')}-${String(Math.floor(Math.random()*28)+1).padStart(2,'0')} ${String(Math.floor(Math.random()*24)).padStart(2,'0')}:${String(Math.floor(Math.random()*60)).padStart(2,'0')}:00` : null,
        Lat_Site: 40.7 + Math.random() * 0.5,
        Lon_Site: 28.6 + Math.random() * 0.9
      }))
    ];

const utilizedCells = [
  // ƒ∞stanbul kara sƒ±nƒ±rlarƒ± i√ßinde 100 adet problemli nokta
  { id: 1, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_001", cellId: 8001, cellName: "IST001_LTE_01", reason: "LTE_High_Utilized_Cell(Youtube)", date: "2023-07-12 18:00:26", lMax: 174, prb: 87, thrg: "60 Minutes", lat: 41.0156, lng: 28.9789 },
  { id: 2, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_002", cellId: 8002, cellName: "IST002_LTE_02", reason: "LTE_High_Utilized_Cell(TikTok)", date: "2023-07-12 18:05:26", lMax: 168, prb: 34, thrg: "60 Minutes", lat: 41.0089, lng: 28.9756 },
  { id: 3, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_003", cellId: 8003, cellName: "IST003_LTE_03", reason: "LTE_High_Utilized_Cell(Instagram)", date: "2023-07-12 18:10:26", lMax: 181, prb: 72, thrg: "60 Minutes", lat: 41.0234, lng: 28.9823 },
  { id: 4, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_004", cellId: 8004, cellName: "IST004_LTE_04", reason: "LTE_High_Utilized_Cell(YouTube)", date: "2023-07-12 18:15:26", lMax: 190, prb: 56, thrg: "60 Minutes", lat: 41.0145, lng: 28.9812 },
  { id: 5, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_005", cellId: 8005, cellName: "IST005_LTE_05", reason: "LTE_High_Utilized_Cell(Video)", date: "2023-07-12 18:20:26", lMax: 160, prb: 43, thrg: "30 Minutes", lat: 41.0198, lng: 28.9678 },
  { id: 6, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_006", cellId: 8006, cellName: "IST006_LTE_01", reason: "LTE_High_Utilized_Cell(Streaming)", date: "2023-10-19 02:00:41", lMax: 79, prb: 91, thrg: "60 Minutes", lat: 40.9876, lng: 29.3456 },
  { id: 7, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_007", cellId: 8007, cellName: "IST007_LTE_02", reason: "LTE_High_Utilized_Cell(Gaming)", date: "2023-10-19 02:10:41", lMax: 88, prb: 23, thrg: "60 Minutes", lat: 40.9934, lng: 29.3512 },
  { id: 8, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_008", cellId: 8008, cellName: "IST008_LTE_03", reason: "LTE_High_Utilized_Cell(Youtube)", date: "2023-10-19 02:20:41", lMax: 95, prb: 67, thrg: "60 Minutes", lat: 40.9823, lng: 29.3389 },
  { id: 9, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_009", cellId: 8009, cellName: "IST009_LTE_04", reason: "LTE_High_Utilized_Cell(Instagram)", date: "2023-10-19 02:30:41", lMax: 102, prb: 45, thrg: "60 Minutes", lat: 40.9945, lng: 29.3234 },
  { id: 10, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_010", cellId: 8010, cellName: "IST010_LTE_05", reason: "LTE_High_Utilized_Cell(Video)", date: "2023-10-19 02:40:41", lMax: 110, prb: 78, thrg: "60 Minutes", lat: 40.9789, lng: 29.3645 },
  { id: 11, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_011", cellId: 8011, cellName: "IST011_LTE_01", reason: "LTE_High_Utilized_Cell(Youtube)", date: "2023-09-28 18:00:59", lMax: 103, prb: 52, thrg: "60 Minutes", lat: 41.0789, lng: 28.6543 },
  { id: 12, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_012", cellId: 8012, cellName: "IST012_LTE_02", reason: "LTE_High_Utilized_Cell(TikTok)", date: "2023-09-28 18:05:59", lMax: 98, prb: 85, thrg: "30 Minutes", lat: 41.0834, lng: 28.6588 },
  { id: 13, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_013", cellId: 8013, cellName: "IST013_LTE_03", reason: "LTE_High_Utilized_Cell(Streaming)", date: "2023-09-28 18:10:59", lMax: 112, prb: 31, thrg: "60 Minutes", lat: 41.0745, lng: 28.6498 },
  { id: 14, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_014", cellId: 8014, cellName: "IST014_LTE_04", reason: "LTE_High_Utilized_Cell(Instagram)", date: "2023-09-28 18:15:59", lMax: 120, prb: 64, thrg: "60 Minutes", lat: 41.0879, lng: 28.6543 },
  { id: 15, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_015", cellId: 8015, cellName: "IST015_LTE_05", reason: "LTE_High_Utilized_Cell(Video)", date: "2023-09-28 18:20:59", lMax: 130, prb: 79, thrg: "60 Minutes", lat: 41.0699, lng: 28.6353 },
  { id: 16, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_016", cellId: 8016, cellName: "IST016_LTE_01", reason: "LTE_High_Utilized_Cell(Youtube)", date: "2023-09-28 13:00:45", lMax: 183, prb: 38, thrg: "60 Minutes", lat: 40.9456, lng: 29.1234 },
  { id: 17, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_017", cellId: 8017, cellName: "IST017_LTE_02", reason: "LTE_High_Utilized_Cell(TikTok)", date: "2023-09-28 13:05:45", lMax: 176, prb: 92, thrg: "60 Minutes", lat: 40.9501, lng: 29.1234 },
  { id: 18, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_018", cellId: 8018, cellName: "IST018_LTE_03", reason: "LTE_High_Utilized_Cell(Streaming)", date: "2023-09-28 13:10:45", lMax: 171, prb: 55, thrg: "30 Minutes", lat: 40.9456, lng: 29.1279 },
  { id: 19, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_019", cellId: 8019, cellName: "IST019_LTE_04", reason: "LTE_High_Utilized_Cell(Instagram)", date: "2023-09-28 13:15:45", lMax: 165, prb: 68, thrg: "60 Minutes", lat: 40.9411, lng: 29.1234 },
  { id: 20, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_020", cellId: 8020, cellName: "IST020_LTE_05", reason: "LTE_High_Utilized_Cell(Gaming)", date: "2023-09-28 13:20:45", lMax: 190, prb: 42, thrg: "60 Minutes", lat: 40.9456, lng: 29.1189 },
  { id: 21, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_021", cellId: 8021, cellName: "IST021_LTE_01", reason: "LTE_High_Utilized_Cell(Youtube)", date: "2023-11-01 10:15:30", lMax: 185, prb: 83, thrg: "60 Minutes", lat: 41.0565, lng: 29.0145 },
  { id: 22, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_022", cellId: 8022, cellName: "IST022_LTE_02", reason: "LTE_High_Utilized_Cell(TikTok)", date: "2023-11-01 10:20:30", lMax: 172, prb: 27, thrg: "60 Minutes", lat: 41.0612, lng: 29.0234 },
  { id: 23, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_023", cellId: 8023, cellName: "IST023_LTE_03", reason: "LTE_High_Utilized_Cell(Streaming)", date: "2023-11-01 10:25:30", lMax: 168, prb: 71, thrg: "60 Minutes", lat: 41.0467, lng: 29.0089 },
  { id: 24, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_024", cellId: 8024, cellName: "IST024_LTE_04", reason: "LTE_High_Utilized_Cell(Instagram)", date: "2023-11-01 10:30:30", lMax: 180, prb: 47, thrg: "60 Minutes", lat: 41.0678, lng: 29.0301 },
  { id: 25, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_025", cellId: 8025, cellName: "IST025_LTE_05", reason: "LTE_High_Utilized_Cell(Video)", date: "2023-11-01 10:35:30", lMax: 155, prb: 61, thrg: "60 Minutes", lat: 41.0523, lng: 29.0056 },
  { id: 26, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_026", cellId: 8026, cellName: "IST026_LTE_01", reason: "LTE_High_Utilized_Cell(Youtube)", date: "2023-11-02 14:45:20", lMax: 177, prb: 88, thrg: "60 Minutes", lat: 40.8956, lng: 29.2345 },
  { id: 27, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_027", cellId: 8027, cellName: "IST027_LTE_02", reason: "LTE_High_Utilized_Cell(TikTok)", date: "2023-11-02 14:50:20", lMax: 165, prb: 35, thrg: "60 Minutes", lat: 40.9023, lng: 29.2412 },
  { id: 28, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_028", cellId: 8028, cellName: "IST028_LTE_03", reason: "LTE_High_Utilized_Cell(Streaming)", date: "2023-11-02 14:55:20", lMax: 182, prb: 74, thrg: "60 Minutes", lat: 40.8889, lng: 29.2278 },
  { id: 29, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_029", cellId: 8029, cellName: "IST029_LTE_04", reason: "LTE_High_Utilized_Cell(Instagram)", date: "2023-11-02 15:00:20", lMax: 191, prb: 59, thrg: "60 Minutes", lat: 40.9089, lng: 29.2534 },
  { id: 30, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_030", cellId: 8030, cellName: "IST030_LTE_05", reason: "LTE_High_Utilized_Cell(Video)", date: "2023-11-02 15:05:20", lMax: 158, prb: 18, thrg: "60 Minutes", lat: 40.8756, lng: 29.2145 },
  { id: 31, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_031", cellId: 8031, cellName: "IST031_LTE_01", reason: "LTE_High_Utilized_Cell(Youtube)", date: "2023-11-03 09:30:15", lMax: 179, prb: 81, thrg: "60 Minutes", lat: 41.1234, lng: 28.8567 },
  { id: 32, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_032", cellId: 8032, cellName: "IST032_LTE_02", reason: "LTE_High_Utilized_Cell(TikTok)", date: "2023-11-03 09:35:15", lMax: 170, prb: 49, thrg: "60 Minutes", lat: 41.1301, lng: 28.8623 },
  { id: 33, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_033", cellId: 8033, cellName: "IST033_LTE_03", reason: "LTE_High_Utilized_Cell(Streaming)", date: "2023-11-03 09:40:15", lMax: 175, prb: 63, thrg: "60 Minutes", lat: 41.1167, lng: 28.8489 },
  { id: 34, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_034", cellId: 8034, cellName: "IST034_LTE_04", reason: "LTE_High_Utilized_Cell(Instagram)", date: "2023-11-03 09:45:15", lMax: 188, prb: 76, thrg: "60 Minutes", lat: 41.1378, lng: 28.8734 },
  { id: 35, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_035", cellId: 8035, cellName: "IST035_LTE_05", reason: "LTE_High_Utilized_Cell(Video)", date: "2023-11-03 09:50:15", lMax: 162, prb: 40, thrg: "60 Minutes", lat: 41.1089, lng: 28.8412 },
  { id: 36, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_036", cellId: 8036, cellName: "IST036_LTE_01", reason: "LTE_High_Utilized_Cell(Youtube)", date: "2023-11-04 16:20:45", lMax: 186, prb: 89, thrg: "60 Minutes", lat: 40.7845, lng: 29.4567 },
  { id: 37, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_037", cellId: 8037, cellName: "IST037_LTE_02", reason: "LTE_High_Utilized_Cell(TikTok)", date: "2023-11-04 16:25:45", lMax: 173, prb: 24, thrg: "60 Minutes", lat: 40.7912, lng: 29.4623 },
  { id: 38, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_038", cellId: 8038, cellName: "IST038_LTE_03", reason: "LTE_High_Utilized_Cell(Streaming)", date: "2023-11-04 16:30:45", lMax: 167, prb: 70, thrg: "60 Minutes", lat: 40.7778, lng: 29.4434 },
  { id: 39, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_039", cellId: 8039, cellName: "IST039_LTE_04", reason: "LTE_High_Utilized_Cell(Instagram)", date: "2023-11-04 16:35:45", lMax: 184, prb: 54, thrg: "60 Minutes", lat: 40.8001, lng: 29.4712 },
  { id: 40, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_040", cellId: 8040, cellName: "IST040_LTE_05", reason: "LTE_High_Utilized_Cell(Video)", date: "2023-11-04 16:40:45", lMax: 156, prb: 36, thrg: "60 Minutes", lat: 40.7667, lng: 29.4301 },
  { id: 41, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_041", cellId: 8041, cellName: "IST041_LTE_01", reason: "LTE_High_Utilized_Cell(Youtube)", date: "2023-11-05 11:10:30", lMax: 181, prb: 93, thrg: "60 Minutes", lat: 41.2456, lng: 28.9234 },
  { id: 42, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_042", cellId: 8042, cellName: "IST042_LTE_02", reason: "LTE_High_Utilized_Cell(TikTok)", date: "2023-11-05 11:15:30", lMax: 168, prb: 46, thrg: "60 Minutes", lat: 41.2523, lng: 28.9301 },
  { id: 43, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_043", cellId: 8043, cellName: "IST043_LTE_03", reason: "LTE_High_Utilized_Cell(Streaming)", date: "2023-11-05 11:20:30", lMax: 176, prb: 77, thrg: "60 Minutes", lat: 41.2389, lng: 28.9089 },
  { id: 44, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_044", cellId: 8044, cellName: "IST044_LTE_04", reason: "LTE_High_Utilized_Cell(Instagram)", date: "2023-11-05 11:25:30", lMax: 189, prb: 28, thrg: "60 Minutes", lat: 41.2578, lng: 28.9456 },
  { id: 45, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_045", cellId: 8045, cellName: "IST045_LTE_05", reason: "LTE_High_Utilized_Cell(Video)", date: "2023-11-05 11:30:30", lMax: 159, prb: 65, thrg: "60 Minutes", lat: 41.2301, lng: 28.9012 },
  { id: 46, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_046", cellId: 8046, cellName: "IST046_LTE_01", reason: "LTE_High_Utilized_Cell(Youtube)", date: "2023-11-06 13:45:50", lMax: 178, prb: 84, thrg: "60 Minutes", lat: 40.9234, lng: 29.0156 },
  { id: 47, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_047", cellId: 8047, cellName: "IST047_LTE_02", reason: "LTE_High_Utilized_Cell(TikTok)", date: "2023-11-06 13:50:50", lMax: 169, prb: 32, thrg: "60 Minutes", lat: 40.9301, lng: 29.0223 },
  { id: 48, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_048", cellId: 8048, cellName: "IST048_LTE_03", reason: "LTE_High_Utilized_Cell(Streaming)", date: "2023-11-06 13:55:50", lMax: 174, prb: 69, thrg: "60 Minutes", lat: 40.9167, lng: 28.9989 },
  { id: 49, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_049", cellId: 8049, cellName: "IST049_LTE_04", reason: "LTE_High_Utilized_Cell(Instagram)", date: "2023-11-06 14:00:50", lMax: 187, prb: 58, thrg: "60 Minutes", lat: 40.9389, lng: 29.0367 },
  { id: 50, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_050", cellId: 8050, cellName: "IST050_LTE_05", reason: "LTE_High_Utilized_Cell(Video)", date: "2023-11-06 14:05:50", lMax: 161, prb: 11, thrg: "60 Minutes", lat: 40.9056, lng: 29.0034 },
  { id: 51, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_051", cellId: 8051, cellName: "IST051_LTE_01", reason: "LTE_High_Utilized_Cell(Youtube)", date: "2023-11-07 08:30:20", lMax: 180, prb: 80, thrg: "60 Minutes", lat: 41.0923, lng: 28.7234 },
  { id: 52, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_052", cellId: 8052, cellName: "IST052_LTE_02", reason: "LTE_High_Utilized_Cell(TikTok)", date: "2023-11-07 08:35:20", lMax: 171, prb: 50, thrg: "60 Minutes", lat: 41.0989, lng: 28.7301 },
  { id: 53, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_053", cellId: 8053, cellName: "IST053_LTE_03", reason: "LTE_High_Utilized_Cell(Streaming)", date: "2023-11-07 08:40:20", lMax: 177, prb: 95, thrg: "60 Minutes", lat: 41.0856, lng: 28.7089 },
  { id: 54, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_054", cellId: 8054, cellName: "IST054_LTE_04", reason: "LTE_High_Utilized_Cell(Instagram)", date: "2023-11-07 08:45:20", lMax: 190, prb: 41, thrg: "60 Minutes", lat: 41.1034, lng: 28.7467 },
  { id: 55, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_055", cellId: 8055, cellName: "IST055_LTE_05", reason: "LTE_High_Utilized_Cell(Video)", date: "2023-11-07 08:50:20", lMax: 164, prb: 62, thrg: "60 Minutes", lat: 41.0778, lng: 28.7145 },
  { id: 56, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_056", cellId: 8056, cellName: "IST056_LTE_01", reason: "LTE_High_Utilized_Cell(Youtube)", date: "2023-11-08 15:15:40", lMax: 183, prb: 75, thrg: "60 Minutes", lat: 40.8678, lng: 29.3245 },
  { id: 57, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_057", cellId: 8057, cellName: "IST057_LTE_02", reason: "LTE_High_Utilized_Cell(TikTok)", date: "2023-11-08 15:20:40", lMax: 172, prb: 21, thrg: "60 Minutes", lat: 40.8745, lng: 29.3312 },
  { id: 58, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_058", cellId: 8058, cellName: "IST058_LTE_03", reason: "LTE_High_Utilized_Cell(Streaming)", date: "2023-11-08 15:25:40", lMax: 179, prb: 51, thrg: "60 Minutes", lat: 40.8612, lng: 29.3089 },
  { id: 59, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_059", cellId: 8059, cellName: "IST059_LTE_04", reason: "LTE_High_Utilized_Cell(Instagram)", date: "2023-11-08 15:30:40", lMax: 192, prb: 86, thrg: "60 Minutes", lat: 40.8823, lng: 29.3467 },
  { id: 60, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_060", cellId: 8060, cellName: "IST060_LTE_05", reason: "LTE_High_Utilized_Cell(Video)", date: "2023-11-08 15:35:40", lMax: 165, prb: 37, thrg: "60 Minutes", lat: 40.8534, lng: 29.3012 },
  { id: 61, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_061", cellId: 8061, cellName: "IST061_LTE_01", reason: "LTE_High_Utilized_Cell(Youtube)", date: "2023-11-09 10:45:25", lMax: 182, prb: 73, thrg: "60 Minutes", lat: 41.1567, lng: 28.8901 },
  { id: 62, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_062", cellId: 8062, cellName: "IST062_LTE_02", reason: "LTE_High_Utilized_Cell(TikTok)", date: "2023-11-09 10:50:25", lMax: 170, prb: 60, thrg: "60 Minutes", lat: 41.1634, lng: 28.8967 },
  { id: 63, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_063", cellId: 8063, cellName: "IST063_LTE_03", reason: "LTE_High_Utilized_Cell(Streaming)", date: "2023-11-09 10:55:25", lMax: 176, prb: 29, thrg: "60 Minutes", lat: 41.1501, lng: 28.8734 },
  { id: 64, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_064", cellId: 8064, cellName: "IST064_LTE_04", reason: "LTE_High_Utilized_Cell(Instagram)", date: "2023-11-09 11:00:25", lMax: 188, prb: 48, thrg: "60 Minutes", lat: 41.1712, lng: 28.9123 },
  { id: 65, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_065", cellId: 8065, cellName: "IST065_LTE_05", reason: "LTE_High_Utilized_Cell(Video)", date: "2023-11-09 11:05:25", lMax: 163, prb: 97, thrg: "60 Minutes", lat: 41.1423, lng: 28.8612 },
  { id: 66, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_066", cellId: 8066, cellName: "IST066_LTE_01", reason: "LTE_High_Utilized_Cell(Youtube)", date: "2023-11-10 14:20:35", lMax: 179, prb: 25, thrg: "60 Minutes", lat: 40.7956, lng: 29.1678 },
  { id: 67, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_067", cellId: 8067, cellName: "IST067_LTE_02", reason: "LTE_High_Utilized_Cell(TikTok)", date: "2023-11-10 14:25:35", lMax: 173, prb: 82, thrg: "60 Minutes", lat: 40.8023, lng: 29.1745 },
  { id: 68, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_068", cellId: 8068, cellName: "IST068_LTE_03", reason: "LTE_High_Utilized_Cell(Streaming)", date: "2023-11-10 14:30:35", lMax: 178, prb: 39, thrg: "60 Minutes", lat: 40.7889, lng: 29.1512 },
  { id: 69, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_069", cellId: 8069, cellName: "IST069_LTE_04", reason: "LTE_High_Utilized_Cell(Instagram)", date: "2023-11-10 14:35:35", lMax: 185, prb: 66, thrg: "60 Minutes", lat: 40.8112, lng: 29.1856 },
  { id: 70, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_070", cellId: 8070, cellName: "IST070_LTE_05", reason: "LTE_High_Utilized_Cell(Video)", date: "2023-11-10 14:40:35", lMax: 162, prb: 44, thrg: "60 Minutes", lat: 40.7778, lng: 29.1389 },
  { id: 71, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_071", cellId: 8071, cellName: "IST071_LTE_01", reason: "LTE_High_Utilized_Cell(Youtube)", date: "2023-11-11 09:00:15", lMax: 181, prb: 100, thrg: "60 Minutes", lat: 41.1890, lng: 28.9567 },
  { id: 72, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_072", cellId: 8072, cellName: "IST072_LTE_02", reason: "LTE_High_Utilized_Cell(TikTok)", date: "2023-11-11 09:05:15", lMax: 169, prb: 22, thrg: "60 Minutes", lat: 41.1956, lng: 28.9634 },
  { id: 73, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_073", cellId: 8073, cellName: "IST073_LTE_03", reason: "LTE_High_Utilized_Cell(Streaming)", date: "2023-11-11 09:10:15", lMax: 175, prb: 53, thrg: "60 Minutes", lat: 41.1823, lng: 28.9401 },
  { id: 74, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_074", cellId: 8074, cellName: "IST074_LTE_04", reason: "LTE_High_Utilized_Cell(Instagram)", date: "2023-11-11 09:15:15", lMax: 186, prb: 94, thrg: "60 Minutes", lat: 41.2034, lng: 28.9801 },
  { id: 75, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_075", cellId: 8075, cellName: "IST075_LTE_05", reason: "LTE_High_Utilized_Cell(Video)", date: "2023-11-11 09:20:15", lMax: 160, prb: 26, thrg: "60 Minutes", lat: 41.1745, lng: 28.9234 },
  { id: 76, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_076", cellId: 8076, cellName: "IST076_LTE_01", reason: "LTE_High_Utilized_Cell(Youtube)", date: "2023-11-12 16:30:45", lMax: 184, prb: 57, thrg: "60 Minutes", lat: 40.9567, lng: 29.4123 },
  { id: 77, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_077", cellId: 8077, cellName: "IST077_LTE_02", reason: "LTE_High_Utilized_Cell(TikTok)", date: "2023-11-12 16:35:45", lMax: 171, prb: 99, thrg: "60 Minutes", lat: 40.9634, lng: 29.4190 },
  { id: 78, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_078", cellId: 8078, cellName: "IST078_LTE_03", reason: "LTE_High_Utilized_Cell(Streaming)", date: "2023-11-12 16:40:45", lMax: 177, prb: 15, thrg: "60 Minutes", lat: 40.9501, lng: 28.3956 },
  { id: 79, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_079", cellId: 8079, cellName: "IST079_LTE_04", reason: "LTE_High_Utilized_Cell(Instagram)", date: "2023-11-12 16:45:45", lMax: 189, prb: 90, thrg: "60 Minutes", lat: 40.9712, lng: 29.4467 },
  { id: 80, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_080", cellId: 8080, cellName: "IST080_LTE_05", reason: "LTE_High_Utilized_Cell(Video)", date: "2023-11-12 16:50:45", lMax: 158, prb: 33, thrg: "60 Minutes", lat: 40.9389, lng: 29.3734 },
  { id: 81, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_081", cellId: 8081, cellName: "IST081_LTE_01", reason: "LTE_High_Utilized_Cell(Youtube)", date: "2023-11-13 11:15:50", lMax: 180, prb: 98, thrg: "60 Minutes", lat: 41.2178, lng: 28.7890 },
  { id: 82, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_082", cellId: 8082, cellName: "IST082_LTE_02", reason: "LTE_High_Utilized_Cell(TikTok)", date: "2023-11-13 11:20:50", lMax: 167, prb: 12, thrg: "60 Minutes", lat: 41.2245, lng: 28.7956 },
  { id: 83, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_083", cellId: 8083, cellName: "IST083_LTE_03", reason: "LTE_High_Utilized_Cell(Streaming)", date: "2023-11-13 11:25:50", lMax: 174, prb: 74, thrg: "60 Minutes", lat: 41.2112, lng: 28.7723 },
  { id: 84, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_084", cellId: 8084, cellName: "IST084_LTE_04", reason: "LTE_High_Utilized_Cell(Instagram)", date: "2023-11-13 11:30:50", lMax: 187, prb: 30, thrg: "60 Minutes", lat: 41.2301, lng: 28.8178 },
  { id: 85, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_085", cellId: 8085, cellName: "IST085_LTE_05", reason: "LTE_High_Utilized_Cell(Video)", date: "2023-11-13 11:35:50", lMax: 161, prb: 16, thrg: "60 Minutes", lat: 41.2034, lng: 28.7612 },
  { id: 86, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_086", cellId: 8086, cellName: "IST086_LTE_01", reason: "LTE_High_Utilized_Cell(Youtube)", date: "2023-11-14 13:45:20", lMax: 182, prb: 19, thrg: "60 Minutes", lat: 40.8234, lng: 29.2567 },
  { id: 87, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_087", cellId: 8087, cellName: "IST087_LTE_02", reason: "LTE_High_Utilized_Cell(TikTok)", date: "2023-11-14 13:50:20", lMax: 170, prb: 96, thrg: "60 Minutes", lat: 40.8301, lng: 28.2634 },
  { id: 88, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_088", cellId: 8088, cellName: "IST088_LTE_03", reason: "LTE_High_Utilized_Cell(Streaming)", date: "2023-11-14 13:55:20", lMax: 176, prb: 20, thrg: "60 Minutes", lat: 40.8167, lng: 29.2401 },
  { id: 89, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_089", cellId: 8089, cellName: "IST089_LTE_04", reason: "LTE_High_Utilized_Cell(Instagram)", date: "2023-11-14 14:00:20", lMax: 188, prb: 13, thrg: "60 Minutes", lat: 40.8389, lng: 29.2823 },
  { id: 90, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_090", cellId: 8090, cellName: "IST090_LTE_05", reason: "LTE_High_Utilized_Cell(Video)", date: "2023-11-14 14:05:20", lMax: 159, prb: 14, thrg: "60 Minutes", lat: 40.8056, lng: 29.2234 },
  { id: 91, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_091", cellId: 8091, cellName: "IST091_LTE_01", reason: "LTE_High_Utilized_Cell(Youtube)", date: "2023-11-15 10:30:40", lMax: 183, prb: 17, thrg: "60 Minutes", lat: 41.0345, lng: 28.8234 },
  { id: 92, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_092", cellId: 8092, cellName: "IST092_LTE_02", reason: "LTE_High_Utilized_Cell(TikTok)", date: "2023-11-15 10:35:40", lMax: 168, prb: 10, thrg: "60 Minutes", lat: 41.0412, lng: 28.8301 },
  { id: 93, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_093", cellId: 8093, cellName: "IST093_LTE_03", reason: "LTE_High_Utilized_Cell(Streaming)", date: "2023-11-15 10:40:40", lMax: 179, prb: 11, thrg: "60 Minutes", lat: 41.0278, lng: 28.8089 },
  { id: 94, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_094", cellId: 8094, cellName: "IST094_LTE_04", reason: "LTE_High_Utilized_Cell(Instagram)", date: "2023-11-15 10:45:40", lMax: 185, prb: 91, thrg: "60 Minutes", lat: 41.0478, lng: 28.8456 },
  { id: 95, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_095", cellId: 8095, cellName: "IST095_LTE_05", reason: "LTE_High_Utilized_Cell(Video)", date: "2023-11-15 10:50:40", lMax: 164, prb: 72, thrg: "60 Minutes", lat: 41.0167, lng: 28.8012 },
  { id: 96, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_096", cellId: 8096, cellName: "IST096_LTE_01", reason: "LTE_High_Utilized_Cell(Youtube)", date: "2023-11-16 15:20:25", lMax: 181, prb: 64, thrg: "60 Minutes", lat: 40.9845, lng: 29.0234 },
  { id: 97, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_097", cellId: 8097, cellName: "IST097_LTE_02", reason: "LTE_High_Utilized_Cell(TikTok)", date: "2023-11-16 15:25:25", lMax: 172, prb: 13, thrg: "60 Minutes", lat: 40.9912, lng: 29.0301 },
  { id: 98, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_098", cellId: 8098, cellName: "IST098_LTE_03", reason: "LTE_High_Utilized_Cell(Streaming)", date: "2023-11-16 15:30:25", lMax: 177, prb: 98, thrg: "60 Minutes", lat: 40.9778, lng: 29.0089 },
  { id: 99, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_099", cellId: 8099, cellName: "IST099_LTE_04", reason: "LTE_High_Utilized_Cell(Instagram)", date: "2023-11-16 15:35:25", lMax: 190, prb: 27, thrg: "60 Minutes", lat: 41.0012, lng: 29.0467 },
  { id: 100, oss_id: 1, disaster_event_id: 552293, cabName: "GL34_IST_100", cellId: 8100, cellName: "IST100_LTE_05", reason: "LTE_High_Utilized_Cell(Video)", date: "2023-11-16 15:40:25", lMax: 163, prb: 14, thrg: "60 Minutes", lat: 40.9612, lng: 29.0012 }
];

    // Harita ve katmanlar
    const map = L.map('map', { 
      center: [39.0, 35.0], 
      zoom: 6, 
      minZoom: 6,
      maxZoom: 16,
      preferCanvas: true 
    });
    const osm = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 19,
      attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);

    const esri = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
      maxZoom: 19,
      attribution: '&copy; Esri'
    });

    const fixedNEsLayer = L.layerGroup().addTo(map);
    const disconnectedNEsLayer = L.layerGroup().addTo(map);
    let heatmapLayer = null;
    let utilizedMarkersLayer = null;
    let utilizedCellsData = [];

    function isValidCoord(lat, lng) {
      return isFinite(lat) && isFinite(lng);
    }

    function renderSites(data) {
      fixedNEsLayer.clearLayers();
      disconnectedNEsLayer.clearLayers();
      
      data.forEach(s => {
        const { Lat_Site: lat, Lon_Site: lng, cab_name, enabled_date } = s;
        if (!isValidCoord(+lat, +lng)) return;
        
        const isFixed = !!enabled_date;
        const fill = isFixed ? '#4caf50' : '#f44336';
        const popupContent = `<b>${cab_name}</b><br/>D√ºzelme: ${enabled_date || '-'}`;
        
        const marker = L.circleMarker([+lat, +lng], {
          radius: 3, color: '#fff', weight: 1, fillColor: fill, fillOpacity: 0.8,
          interactive: true, bubblingMouseEvents: false, pane: 'markerPane'
        }).bindPopup(popupContent);

        if (isFixed) {
          marker.addTo(fixedNEsLayer);
        } else {
          marker.addTo(disconnectedNEsLayer);
        }
      });
    }

    function renderHeatmap(utilCells) {
      if (!L.heatLayer) return;
      if (heatmapLayer) heatmapLayer.remove();
      if (utilizedMarkersLayer) utilizedMarkersLayer.remove();

      utilizedCellsData = utilCells;

      const points = utilCells
        .map(uc => {
          const { lat, lng, prb } = uc;
          return isValidCoord(+lat, +lng) ? [+lat, +lng, Math.max(0, Math.min(prb / 100, 1))] : null;
        })
        .filter(p => p);

      if (points.length === 0) return;
      
      heatmapLayer = L.heatLayer(points, {
        radius: 25, blur: 25, maxZoom: 9, maxIntensity: 1,
        gradient: { 0.0: 'green', 0.4: 'yellow', 0.6: 'darkorange', 1.0: 'red' }
      }).addTo(map);

      utilizedMarkersLayer = L.layerGroup();
      utilCells.forEach(uc => {
        const { lat, lng, cellName, cabName, cellId, reason, date, lMax, prb, thrg } = uc;
        if (!isValidCoord(+lat, +lng)) return;
        
        const marker = L.circleMarker([+lat, +lng], {
          radius: 5, color: 'rgba(0,0,0,0)', weight: 0,
          fillColor: 'rgba(0,0,0,0)', fillOpacity: 0, interactive: true, pane: 'markerPane'
        });

        marker.on('click', () => { 
          showDetailPanel(uc);
        });
        marker.addTo(utilizedMarkersLayer);
      });
      
      utilizedMarkersLayer.addTo(map);
    }

    function getPRBClass(prb) {
      if (prb >= 80) return 'prb-high';
      if (prb >= 50) return 'prb-medium';
      return 'prb-low';
    }

    function showDetailPanel(cell) {
      const table = document.getElementById('detailTable');
      table.innerHTML = `
        <tr><td>üì± Cell Adƒ±:</td><td>${cell.cellName}</td></tr>
        <tr><td>üè¢ Saha Adƒ±:</td><td>${cell.cabName}</td></tr>
        <tr><td>üÜî Cell ID:</td><td>${cell.cellId}</td></tr>
        <tr><td>‚ö†Ô∏è Sebep:</td><td>${cell.reason}</td></tr>
        <tr><td>üìÖ Tarih:</td><td>${cell.date}</td></tr>
        <tr><td>üìä PRB:</td><td><span class="${getPRBClass(cell.prb)}">${cell.prb}%</span></td></tr>
        <tr><td>üìà lMax:</td><td>${cell.lMax}</td></tr>
        <tr><td>‚è±Ô∏è Threshold:</td><td>${cell.thrg}</td></tr>
        <tr><td>üìç Konum:</td><td>${(+cell.lat).toFixed(4)}, ${(+cell.lng).toFixed(4)}</td></tr>
      `;
      document.getElementById('detailPanel').classList.add('show');
      document.getElementById('searchResults').classList.remove('show');
    }

    function closeDetailPanel() {
      document.getElementById('detailPanel').classList.remove('show');
    }

    function performSearch(query) {
      if (!query.trim()) {
        document.getElementById('searchResults').classList.remove('show');
        return;
      }

      // utilizedCells'ten arama
      const utilizedResults = utilizedCellsData.filter(cell => 
        cell.cellName.toLowerCase().includes(query.toLowerCase()) ||
        cell.cabName.toLowerCase().includes(query.toLowerCase()) ||
        cell.reason.toLowerCase().includes(query.toLowerCase())
      );

      // siteStatuses'tan arama
      const siteResults = siteStatuses.filter(site =>
        site.cab_name.toLowerCase().includes(query.toLowerCase())
      ).map(site => ({
        id: `site_${site.cab_name}`,
        cellName: site.cab_name,
        cabName: site.cab_name,
        cellId: '-',
        reason: site.enabled_date ? 'Aktif Saha (Fixed NE)' : 'ƒ∞naktif Saha (Disconnected NE)',
        date: site.enabled_date || '-',
        lMax: '-',
        prb: site.enabled_date ? 0 : 100,
        thrg: '-',
        lat: site.Lat_Site,
        lng: site.Lon_Site,
        isSite: true
      }));

      // Sonu√ßlarƒ± birle≈ütir
      const allResults = [...utilizedResults, ...siteResults];

      const table = document.getElementById('resultsTable');
      
      if (allResults.length === 0) {
        table.innerHTML = '<tr><td colspan="2" class="no-results">Sonu√ß bulunamadƒ±</td></tr>';
        document.getElementById('searchResults').classList.add('show');
        return;
      }

      table.innerHTML = allResults.slice(0, 20).map(cell => `
        <tr class="clickable" onclick="handleCellClick('${cell.cellName}', ${cell.lat}, ${cell.lng}, '${cell.id}')">
          <td>${cell.cellName}</td>
          <td>${cell.cabName} ‚Ä¢ ${cell.isSite ? (cell.date !== '-' ? '‚úì Aktif' : '‚úó ƒ∞naktif') : 'PRB: <span class="' + getPRBClass(cell.prb) + '">' + cell.prb + '%</span>'}</td>
        </tr>
      `).join('');

      document.getElementById('searchResults').classList.add('show');
    }

    window.handleCellClick = function(cellName, lat, lng, id) {
      // Site mi yoksa h√ºcre mi kontrol et
      if (id.startsWith('site_')) {
        const site = siteStatuses.find(s => s.cab_name === cellName);
        if (site) {
          map.setView([site.Lat_Site, site.Lon_Site], 14);
          // Site detay paneli g√∂ster
          const table = document.getElementById('detailTable');
          table.innerHTML = `
            <tr><td>üè¢ Saha Adƒ±:</td><td>${site.cab_name}</td></tr>
            <tr><td>üìä Durum:</td><td>${site.enabled_date ? '<span style="color: #4caf50; font-weight: bold;">‚úì Aktif</span>' : '<span style="color: #f44336; font-weight: bold;">‚úó ƒ∞naktif</span>'}</td></tr>
            <tr><td>üìÖ Etkinle≈ütirme Tarihi:</td><td>${site.enabled_date || 'Hen√ºz etkinle≈ütirilmedi'}</td></tr>
            <tr><td>üìç Latitude:</td><td>${(+site.Lat_Site).toFixed(6)}</td></tr>
            <tr><td>üìç Longitude:</td><td>${(+site.Lon_Site).toFixed(6)}</td></tr>
          `;
          document.getElementById('detailPanel').classList.add('show');
          document.getElementById('searchResults').classList.remove('show');
        }
      } else {
        // H√ºcre detay paneli
        const cell = utilizedCellsData.find(c => c.id == id);
        if (cell) {
          map.setView([lat, lng], 14);
          showDetailPanel(cell);
        }
      }
    };

    // Event Listeners
    document.getElementById('searchInput').addEventListener('input', e => {
      performSearch(e.target.value);
    });

    document.getElementById('heatToggleInput').addEventListener('change', e => {
      if (e.target.checked && heatmapLayer) {
        heatmapLayer.addTo(map);
      } else if (!e.target.checked && heatmapLayer) {
        map.removeLayer(heatmapLayer);
      }
    });

    document.getElementById('fixedNEsToggle').addEventListener('change', e => {
      e.target.checked ? map.addLayer(fixedNEsLayer) : map.removeLayer(fixedNEsLayer);
    });

    document.getElementById('disconnectedNEsToggle').addEventListener('change', e => {
      e.target.checked ? map.addLayer(disconnectedNEsLayer) : map.removeLayer(disconnectedNEsLayer);
    });

    const layerToggleInputs = document.querySelectorAll('input[name="layerToggle"]');
    layerToggleInputs.forEach(input => {
      input.addEventListener('change', e => {
        const value = e.target.value;
        map.removeLayer(fixedNEsLayer);
        map.removeLayer(disconnectedNEsLayer);
        if (value === 'fixedNEs') {
          map.addLayer(fixedNEsLayer);
        } else if (value === 'disconnectedNEs') {
          map.addLayer(disconnectedNEsLayer);
        }
      });
    });

    const mapLayerInputs = document.querySelectorAll('input[name="mapLayer"]');
    mapLayerInputs.forEach(input => {
      input.addEventListener('change', e => {
        const value = e.target.value;
        if (value === 'osm') {
          map.addLayer(osm);
          map.removeLayer(esri);
        } else if (value === 'esri') {
          map.addLayer(esri);
          map.removeLayer(osm);
        }
      });
    });

    // Initialize
    renderSites(siteStatuses);
    renderHeatmap(utilizedCells);
  </script>
</body>
</html>
